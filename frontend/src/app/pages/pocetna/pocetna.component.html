<div
  class="min-h-screen bg-cover bg-center bg-fixed flex flex-col items-center justify-start relative pt-40"
  style="background-image: url('pozadina.jpg');"
>
  <!-- Grb iznad forme -->
  <div class="absolute top-12 flex justify-center w-full pointer-events-none">
    <img src="slika1.png" alt="Grb" class="w-44 h-auto opacity-40 drop-shadow-2xl">
  </div>
  <div class="bg-white/90 p-6 rounded shadow-md w-full md:w-3/4 lg:w-2/3">
  <!-- Search po nazivu -->
  <div class="flex gap-2 mb-4">
    <input type="text" [(ngModel)]="naziv" placeholder="Pretraži po nazivu"
           class="border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"/>
    <button (click)="pretrazi()"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
      Pretraži
    </button>
    <button (click)="resetujPretragu()"
            class="bg-gray-300 text-black px-4 py-2 rounded hover:bg-gray-400 transition">
      Resetuj
    </button>
    <button (click)="toggleAdvanced()"
            class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 transition">
      Advanced
    </button>
  </div>

  <!-- Advanced search dropdown -->
  <div *ngIf="showAdvanced" class="border-t mt-2 pt-4 space-y-2">
    <div class="flex flex-col md:flex-row gap-4">
      <div>
        <label>Kategorija:</label>
        <select [(ngModel)]="izabranaKategorija" class="border px-2 py-1 rounded">
          <option value="">Sve</option>
          <option *ngFor="let k of kategorije" [value]="k">{{k}}</option>
        </select>
      </div>
      <div>
        <label>Autor:</label>
        <input type="text" [(ngModel)]="autor" class="border px-2 py-1 rounded"/>
      </div>
      <div>
        <label>Opis:</label>
        <input type="text" [(ngModel)]="opis" class="border px-2 py-1 rounded"/>
      </div>
    </div>

    <div class="flex flex-col md:flex-row gap-4 mt-2">
      <div>
        <label>Količina od:</label>
        <input type="number" [(ngModel)]="kolicinaOd" class="border px-2 py-1 rounded"/>
      </div>
      <div>
        <label>Količina do:</label>
        <input type="number" [(ngModel)]="kolicinaDo" class="border px-2 py-1 rounded"/>
      </div>
      <div>
        <label>Godina od:</label>
        <input type="number" [(ngModel)]="godinaOd" class="border px-2 py-1 rounded"/>
      </div>
      <div>
        <label>Godina do:</label>
        <input type="number" [(ngModel)]="godinaDo" class="border px-2 py-1 rounded"/>
      </div>
    </div>
  </div>
</div>

<!-- Grid knjiga ostaje isto -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
  <div *ngFor="let knjiga of knjige" class="bg-white shadow-md rounded p-4 border border-gray-200">
    <h3 class="text-xl font-bold mb-2">{{ knjiga.naziv }}</h3>
    <p><span class="font-semibold">Autor:</span> {{ knjiga.autor }}</p>
    <p><span class="font-semibold">Opis:</span> {{ knjiga.opis }}</p>
    <p><span class="font-semibold">Kategorija:</span> {{ knjiga.kategorija }}</p>
    <p><span class="font-semibold">Količina:</span> {{ knjiga.kolicina }}</p>

    <button *ngIf="authService.hasRole('ROLE_STUDENT')||authService.hasRole('ROLE_NASTAVNIK')" (click)="izdaj(knjiga.id!)"
            [disabled]="knjiga.kolicina === 0"
            class="mt-4 w-full px-4 py-2 rounded text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed">
      Izdaj knjigu
    </button>

    <button *ngIf="authService.hasRole('ROLE_ADMIN')" (click)="edit(knjiga.id!)"
            class="mt-4 w-full px-4 py-2 rounded text-white bg-green-600 hover:bg-green-700">
      Edit knjigu
    </button>
  </div>
</div>
</div>
